<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>intentïon</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #B2B9BC; /* Blue sky hints */
            overflow: hidden;
            font-family: sans-serif;
            width: 100vw;
            height: 100vh;
            position: relative;
            z-index: 0;
        }
        .fogOne, .fogTwo, .fogThree, .fogFour, .fogFive {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background-size: cover;
            animation: fadeInOut 10s infinite;
            pointer-events: none; /* Allow mouse events to pass through to elements below */
            z-index: 5; /* Lower than intention but above body */
        }
        .fogOne { background: url('vecteezy_white-fog-illustration_24065516-bottom-low.png') no-repeat center center; animation-duration: 3s; }
        .fogTwo { background: url('vecteezy_white-fog-illustration_24065530-bottom-risen.png') no-repeat center center; animation-duration: 4s; }
        .fogThree { background: url('vecteezy_white-fog-illustration_24065547-centre.png') no-repeat center center; animation-duration: 5s; }
        .fogFour { background: url('vecteezy_white-fog-illustration_24065523-corner-bottom-right.png') no-repeat center center; animation-duration: 6s; }
        .fogFive { background: url('vecteezy_white-fog-illustration_24065528-diagonal-down-right.png') no-repeat center center; animation-duration: 7s; }

        @keyframes fadeInOut {
            0%,100% { opacity: 0; }
            50%     { opacity: 1; }
        }

        #what {
            color: #333;
            position: absolute;
            top: 5%;
            transform: translateY(-50%);
            font-size: 5vw;
            opacity: 0;
            transition: opacity 3s;
            pointer-events: none;
        }

        #intention {
            color: #333;
            position: absolute;
            top: 5%;
            transform: translateY(-50%);
            font-size: 5vw;
            opacity: 0;
            transition: opacity 3s;
            pointer-events: none;
            z-index: 10;
        }

        #giscus-container {
            position: absolute;
            width: 100%;
            left: 50%;
            transform: translateX(-50%);
            top: 20px;
            z-index: 1000;
            opacity: 0.5;
            padding: 0 5%;
            box-sizing: border-box;
        }
        @media (orientation: landscape) {
            #giscus-container {
                width: 50%;
            }
        }
    </style>
</head>
<body>

<div class="fogOne"></div>
<div class="fogTwo"></div>
<div class="fogThree"></div>
<div class="fogFour"></div>
<div class="fogFive"></div>

<div id="what">What is your</div>
<div id="intention">intentïon</div>

<!-- ─────────────── giscus embed ─────────────── -->
<div id="giscus-container">
    <script src="https://giscus.app/client.js"
            data-repo="xn-intenton-z2a/repository0"
            data-repo-id="R_kgDON6E8ZA"
            data-category="General"
            data-category-id="DIC_kwDON6E8ZM4CpwzM"
            data-mapping="specific"
            data-term="Talk to the repository"
            data-strict="0"
            data-reactions-enabled="0"
            data-emit-metadata="0"
            data-input-position="top"
            data-theme="light"
            data-lang="en"
            crossorigin="anonymous"
            async>
    </script>
</div>
<!-- ────────────────────────────────────────────── -->

<script>
    console.log('Script started executing');

    // Function to show intention with a random position
    let isIntentionVisible = false;
    let intentionTimeout;
    let isWhatVisible = false;
    let whatTimeout;

    function showWhat() {
        // Don't trigger if the "what" div is already visible
        if (isWhatVisible) return;

        const what = document.getElementById('what');
        // Set a random left position between 25% and 75%
        const randomLeft = Math.floor(Math.random() * (75 - 25 + 1)) + 25;
        what.style.left = `${randomLeft}%`;
        what.style.opacity = '1';
        //what.textContent = "What is your";
        isWhatVisible = true;

        // Clear any existing timeout
        if (whatTimeout) clearTimeout(whatTimeout);

        // Hide what after 3 seconds
        whatTimeout = setTimeout(() => {
            what.style.opacity = '0';
            isWhatVisible = false;
        }, 750);
    }

    function showIntention() {
        console.log('showIntention called'); // Debug log

        // Don't trigger if the "intention" div is already visible
        if (isIntentionVisible) {
            console.log('intention already visible, returning'); // Debug log
            return;
        }

        // Set a flag immediately to prevent multiple triggers during delay
        isIntentionVisible = true;
        console.log('Setting isIntentionVisible to true'); // Debug log

        const intention = document.getElementById('intention');
        // Set a random left position between 25% and 75%
        const randomLeft = Math.floor(Math.random() * (75 - 25 + 1)) + 25;
        intention.style.left = `${randomLeft}%`;
        console.log(`Setting left position to ${randomLeft}%`); // Debug log

        // Clear any existing timeout
        if (intentionTimeout) clearTimeout(intentionTimeout);

        // Add a delay of 1 second before showing the intention
        intentionTimeout = setTimeout(() => {
            intention.style.opacity = '1';
            console.log('Setting opacity to 1'); // Debug log

            // Hide intention after 3 seconds
            intentionTimeout = setTimeout(() => {
                intention.style.opacity = '0';
                isIntentionVisible = false;
                console.log('Setting isIntentionVisible to false'); // Debug log
            }, 3000);
        }, 1500);
    }

    // Show intention on mousemove (works on every mousemove)
    console.log('Adding event listeners');

    // Make sure DOM is fully loaded before adding event listeners
    document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM fully loaded');
        document.body.addEventListener('mousemove', function(e) {
            console.log('mousemove event triggered');
            showWhat();
            showIntention();
        });

        // Also show intention on click/tap for touch devices
        document.body.addEventListener('click', function(e) {
            console.log('click event triggered');
            showWhat();
            showIntention();
        });
    });

    // Add event listeners immediately as well (in case DOMContentLoaded already fired)
    document.body.addEventListener('mousemove', function(e) {
        console.log('mousemove event triggered on body (immediate)');
        showWhat();
        showIntention();
    });

    document.body.addEventListener('click', function(e) {
        console.log('click event triggered on body (immediate)');
        showWhat();
        showIntention();
    });

    // Add event listeners to the document itself
    document.addEventListener('mousemove', function(e) {
        console.log('mousemove event triggered on document');
        showWhat();
        showIntention();
    });

    document.addEventListener('click', function(e) {
        console.log('click event triggered on document');
        showWhat();
        showIntention();
    });


    //document.body.addEventListener('mousemove', showWhat);
    //document.body.addEventListener('click', showWhat);

    // Call showIntention directly after a short delay to test if it works
    console.log('Setting timeout to call showIntention directly');
    setTimeout(function() {
        console.log('Calling showIntention directly');
        showWhat();
        showIntention();
    }, 1000);
</script>

</body>
</html>
